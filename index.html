<div id="content">טוען…</div>
<script>
async function loadTree() {
  const res = await fetch("tree.json");
  return await res.json();
}

function renderNode(node) {
  if (node.type === "pdf") {
    const div = document.createElement("div");
    div.className = "pdf-item";
    const a = document.createElement("a");
    a.className = "pdf-link";
    a.href = node.download_url;
    a.target = "_blank";
    a.textContent = node.name.replace(/\.pdf$/i, "");
    div.appendChild(a);
    return div;
  }

  if (node.type === "dir") {
    const det = document.createElement("details");
    const sum = document.createElement("summary");
    sum.textContent = node.name;
    det.appendChild(sum);

    node.children.forEach(child => {
      det.appendChild(renderNode(child));
    });

    return det;
  }
}

async function load() {
  const tree = await loadTree();
  const container = document.getElementById("content");
  container.innerHTML = "";

  tree.forEach(node => container.appendChild(renderNode(node)));
}

load();
</script>
